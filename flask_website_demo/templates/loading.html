<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <title>Analyzing…</title>
      <script src="https://cdn.tailwindcss.com"></script>

      <style>
         /* Waveform Bars */
         .bar {
            width: 15px;
            height: 60px;
            margin: 0 6px;
            background: #ff4d6d;
            border-radius: 6px;
            animation: bounce 0.6s infinite ease-in-out alternate;
            box-shadow: 0 0 10px #ff4d6d;
         }

         @keyframes bounce {
            0% {
               height: 8px;
               opacity: 0.4;
            }
            100% {
               height: 28px;
               opacity: 1;
            }
         }

         /* Heart Morph Animation */
         @keyframes morphToHeart {
            0% {
               transform: scale(1);
               opacity: 1;
            }
            100% {
               transform: scale(0);
               opacity: 0;
            }
         }

         @keyframes heartPop {
            0% {
               transform: scale(0);
               opacity: 0;
            }
            40% {
               transform: scale(1.25);
               opacity: 1;
            }
            100% {
               transform: scale(1);
            }
         }

         /* Glow Animation */
         @keyframes pulseGlow {
            0%,
            100% {
               filter: drop-shadow(0 0 6px rgba(255, 50, 100, 0.5));
            }
            50% {
               filter: drop-shadow(0 0 14px rgba(255, 70, 130, 0.9));
            }
         }
      </style>
   </head>

   <body
      class="bg-[#0c0c0e] flex flex-col gap-6 items-center justify-center h-screen text-white"
   >
      <div id="wave" class="flex">
         <div class="bar" style="animation-delay: 0s"></div>
         <div class="bar" style="animation-delay: 0.1s"></div>
         <div class="bar" style="animation-delay: 0.2s"></div>
         <div class="bar" style="animation-delay: 0.3s"></div>
         <div class="bar" style="animation-delay: 0.4s"></div>
         <div class="bar" style="animation-delay: 0.5s"></div>
         <div class="bar" style="animation-delay: 0.6s"></div>
         <div class="bar" style="animation-delay: 0.7s"></div>
         <div class="bar" style="animation-delay: 0.8s"></div>
         <div class="bar" style="animation-delay: 0.9s"></div>
         <div class="bar" style="animation-delay: 1s"></div>
         <div class="bar" style="animation-delay: 1.1s"></div>
      </div>
      <!-- HEART MORPH -->
      <img
         id="heart"
         src="/static/full.png"
         class="w-16 opacity-0"
         style="transform-origin: center"
      />

      <p class="text-gray-300 text-lg opacity-70 animate-pulse">
         Analyzing your song…
      </p>

      <script>
         // Waveform plays for 2 seconds
         setTimeout(() => {
            const wave = document.getElementById("wave");
            wave.style.animation = "morphToHeart 0.8s forwards";

            // After bars disappear, show heart
            setTimeout(() => {
               const heart = document.getElementById("heart");
               heart.style.opacity = "1";
               heart.style.animation =
                  "heartPop 0.6s ease-out forwards, pulseGlow 1.6s infinite";
            }, 800);

            setTimeout(() => {
               window.location.href = "/results";
            }, 3800);
         }, 2000);
      </script>
   </body>
</html>